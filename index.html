<!DOCTYPE html>
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name=”viewport” content=”width=device-width,initial-scale=1.0″
</head>

<style>
@media screen and (min-width: 481px) { 
	    margin:0;
	    width: 480px;
	}
@media screen and (max-width: 480px) {
	#tinymce{
	    margin:0;
	}
}
.daikiti{
    background: linear-gradient(to right,#e60000,#f39800,#fff100,#009944,#0068b7,#1d2088,#920783,#e60000) 0 / 200%;
    animation: 1s daikiti linear infinite;
    color: white;
}
@keyframes daikiti{
    100% { background-position: 200%; }
}
#tinymce{
    margin:0;
}
#kekkaArea td{
	padding: 5px;
}
</style>

<script>

function omikuji() {
	alert('おみくじを引いてよろしいですか？？？？？？？？？？？？');
	
	var random = Math.random();

	if (random > 0.75){
		alert('大吉だから良いことあるよ');
	} else if (random > 0.5) {
		alert('吉だよ。可もなく不可もないね。');
	} else if (random > 0.25) {
		alert('中吉だよ。だから何事も中途半端なんだよ。');
	} else if (random > 0.05) {
		alert('凶だよ。まぁ頑張って生きて');
	} else {
		daikyo();
	}
}


function daikyo() {
	const div = document.getElementById('hg');
	div.innerHTML = '<div style="background-color: red; height: 100vh; width: 100vw; display: flex; font-size: 40px; font-weight: bold;"><div style="margin: auto; width: 20px">大凶を引いたので死にます。</div></div>';
}

function renzoku() {
	
	alert('10連おみくじを引きますね');

	var kekka = new Array();

	for (var i=0;i<10;i++) {
		var random = Math.random();

		if (random > 0.97){
			kekka.push({Kekka: "大吉", Moji: "良いことあると良いね。"});
		} else if (random > 0.6) {
			kekka.push({Kekka: "吉", Moji: "平凡な人生って感じ"});
		} else if (random > 0.3) {
			kekka.push({Kekka: "中吉", Moji: "常に中途半端な生き様"});
		} else if (random > 0.01) {
			kekka.push({Kekka: "凶", Moji: "この先不幸が待ってるけどファイト！"});
		} else {
			daikyo();
			return;
		}
	}
	
  const playerList = document.getElementById("kekkaArea");
  playerList.innerHTML = "";

  kekka.forEach((target) => {  // 配列の中のオブジェクトの数だけ処理を繰り返す
    const tr = document.createElement("tr");  
    playerList.appendChild(tr); // 表の中に８個の「tr」（行）ができる
    // 1行の中を生成
    const objArray = Object.entries(target);  // オブジェクトを配列に
    var daikitiYO = 0;
    objArray.forEach((arr) => { // No, name, age, gradeの4回繰り返す
      const td = document.createElement("td");
      td.textContent = arr[1];  // arr[1]はvalueの部分
      if (arr[1] == "大吉" || daikitiYO == 1) {
          daikitiYO = 1;
          td.classList.add("daikiti");
      }
      tr.appendChild(td);
    });
  });


}
</script>

<body id="tinymce" class="mce-content-body " data-id="content" contenteditable="true" spellcheck="false">
<div id="hg">
	<p style="text-align: center;" data-mce-style="text-align: center;">しらんけどおみくじ</p>
	<p style="text-align: center;" data-mce-style="text-align: center;">
		<span style="text-decoration: underline; background-color: rgb(241, 196, 15);" data-mce-style="text-decoration: underline; background-color: #f1c40f;">
			<span style="color: rgb(224, 62, 45);" data-mce-style="color: #e03e2d;">
				<strong>
					<em onclick="omikuji()">おみくじを引く</em>
				</strong>
			</span>
		</span>
	</p>

	<p class = "daikiti" style="text-align: center;" data-mce-style="text-align: center;" onclick="renzoku();">10連おみくじを引く</p>
	<div>
		<p style="text-align: center;">10連結果</p>
		<table id='kekkaArea' border="1" style="border-collapse: collapse; margin: auto"></table>
	</div>
</div>

</body>
</html>
